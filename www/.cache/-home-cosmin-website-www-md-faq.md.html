<h2 id="what-is-luapower">What is luapower?</h2>
<p>Luapower is a free and open source module distribution for <a href="http://luajit.org/luajit.html">LuaJIT</a>, the just-in-time compiler of the <a href="http://lua.org/about.html">Lua programming language</a>. More than that, it is a way of deploying and sharing Lua modules. It focuses on simplicity and portability, and staying out of your way.</p>
<h2 id="what-is-different-about-it">What is different about it?</h2>
<p>Luapower works on all major desktop systems, old and new, out-of-the-box. Backward-compatible binaries are included for all platforms, including Linux. C sources are always included (there's no such thing as an external dependency), the build toolchain is specified for each platform and contains only easy-to-get open source components, so building binaries is no longer a hit-or-miss experience.</p>
<p>Luapower solves all the problems that package managers are supposed to solve (and more), but with none of the bureaucracy that is usually imposed on module writers. With luapower you don't have to write manifest files to describe your packages, you don't have to declare dependencies (except in a few rare cases), you don't have to learn a new build system, or perform any packaging steps, or even move code out of version control, ever.</p>
<p>Modules don't need to be &quot;installed&quot; out of version control in order to create a proper runtime. You can make changes directly on your deployments, and you can push/pull changes between deployments and even create pull requests to upstream without moving files around. There's no runtime overhead either, as there's no need for a custom module loader.</p>
<h2 id="just-the-facts-please">Just the facts please</h2>
<p>Luapower is a dead simple idea: it puts <a href="/luajit">luajit</a> and a bunch of modules in separate repositories <a href="https://github.com/luapower">on github</a>, and it allows you to clone them back together <em>over the same directory</em> (git can do that with the <code>--git-dir</code> option, which we wrap in a <a href="/luapower-git">script</a> for typing comfort). The files in the repos are <a href="/get-involved">laid out</a> such that when cloned overlaid like that, the result is a self-contained, runnable luajit installation. Binaries for all platforms are included directly into the repo's master branch, and <code>luajit</code> is a shell script which selects the right luajit executable for your platform at runtime, and sets up the environment so that modules and other dependencies are looked for in the luapower directory first, effectively isolating the installation from other libraries that might be present in the host system. C sources and build scripts are in there too in separate directories.</p>
<p>This results in a self-contained, version-controled, run-everywhere, build-anytime LuaJIT installation in which packages can be added, removed, upgraded and downgraded at will.</p>
<h2 id="ok-how-do-i-install-it">OK, how do I install it?</h2>
<p>The best way is with <a href="/luapower-git">multigit</a>, which keeps everything under version control at all times, making it easy to add and remove packages, stay up-to-date, make pull requests, and even make deployments.</p>
<h2 id="but-git-sucks-can-i-skip-it">But git sucks, can I skip it?</h2>
<p>Git does indeed suck (to some). If you want to avoid it, you can download the packages from the website directly. <a href="/luajit/download">Getting luajit</a> and the modules that you need and unzipping them over a common directory is enough to create a runnable LuaJIT installation that is self-contained and portable, meaning it will run the included luajit command from any directory and on any platform. The downside is that updating and removing modules must be done manually too.</p>
<h2 id="what-platforms-does-it-run-on">What platforms does it run on?</h2>
<ul>
<li>Windows XP SP3+ / Windows XP x64 SP2+</li>
<li>Linux on x86 with GLIBC 2.7+, 32bit and 64bit (Debian 5+, Ubuntu 8.04+, etc.)</li>
<li>OSX 10.7+, 32bit and 64bit</li>
</ul>
<h2 id="how-do-i-compile-the-binaries">How do I compile the binaries?</h2>
<p>Luapower uses simple shell scripts to build everything. There's no build system, no makefiles, and no need to specify where to look for dependencies in the host system, because all dependencies are available as luapower packages as well. The build scripts are in the <code>csrc</code> directory for each package. The C sources are also included, so you can start right away. Just make sure you have a compatible <a href="/building">build toolchain</a> installed, and that you build the dependencies first, as listed on the website.</p>
<h2 id="can-i-make-single-exe-apps-with-it">Can I make single-exe apps with it?</h2>
<p>Yes. Static libraries are included for all C packages, and can be <a href="/bundle">bundled</a> together with Lua modules and other static resources to create self-contained single-exe apps on any platform.</p>
<h2 id="can-i-use-it-in-commercial-apps">Can I use it in commercial apps?</h2>
<p>Yes. Almost all packages have a non-viral, open-source license, and many are in public domain. If in doubt, check the package table on the homepage (click on the license column to sort by license). Luapower itself, which includes multigit, the build scripts, and the <a href="/luapower">luapower</a> module are in Public Domain.</p>
<h2 id="can-i-use-it-with-plain-lua">Can I use it with plain Lua?</h2>
<p>Although the module collection on the whole is focused on LuaJIT, pure Lua modules should work with Lua 5.1 just fine, and some of them might even work with Lua 5.2 out-of-the-box. Lua/C modules should work with Lua 5.1 too, since LuaJIT is ABI-compatible with it.</p>
<p>You can also compile stock Lua, bundle it as a luapower package and use that as your runtime instead of luajit.</p>
<h2 id="what-about-luaffi">What about luaffi?</h2>
<p>Increasing the portability of luapower beyond LuaJIT is beyond my priorities at the moment. That being said, some Lua+ffi modules might work with luaffi already, but you would have to check that out yourself.</p>
<h2 id="how-do-i-see-which-files-belong-to-which-package">How do I see which files belong to which package?</h2>
<pre><code>mgit &lt;package&gt; ls-files</code></pre>
<h2 id="but-can-i-browse-them-too">But can I browse them too?</h2>
<p>Yes (but not in Windows). Create hard links with <code>mgit --all make-hardlinks</code> and you will get hard links in the <code>.mgit</code> directory for every package. Now they're separate and you can list them and check their size, and even edit them and commit the changes. Remember to run that command again if you add or delete files though.</p>
<h2 id="how-do-i-fix-a-package">How do I fix a package?</h2>
<p>Fork it, clone it from your place (i.e. instead of <code>mgit clone foo</code>, do <code>mgit clone https://github.com/you/foo</code>), fix it, then send a pull request. If you want to become a maintainer, <script type="text/javascript">
<!--
h='&#x67;&#x6d;&#x61;&#x69;&#108;&#46;&#x63;&#x6f;&#x6d;';a='&#64;';n='&#x63;&#x6f;&#x73;&#x6d;&#x69;&#110;&#46;&#x61;&#112;&#114;&#x65;&#x75;&#116;&#x65;&#x73;&#x65;&#x69;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'" clas'+'s="em' + 'ail">'+'email me'+'<\/'+'a'+'>');
// -->
</script><noscript>&#x65;&#x6d;&#x61;&#x69;&#108;&#32;&#x6d;&#x65;&#32;&#40;&#x63;&#x6f;&#x73;&#x6d;&#x69;&#110;&#46;&#x61;&#112;&#114;&#x65;&#x75;&#116;&#x65;&#x73;&#x65;&#x69;&#32;&#x61;&#116;&#32;&#x67;&#x6d;&#x61;&#x69;&#108;&#32;&#100;&#x6f;&#116;&#32;&#x63;&#x6f;&#x6d;&#x29;</noscript> so I can add you to the luapower account on github.</p>
<h2 id="how-do-i-make-a-new-package">How do I make a new package?</h2>
<p>Refer to <a href="/get-involved">get-involved</a> for what it should contain.<br> Refer to <a href="/luapower-git">luapower-git</a> for the actual procedure.</p>
<h2 id="how-is-it-different-from-luarocks">How is it different from LuaRocks?</h2>
<blockquote>
<p><strong>FIXME</strong>: What follows is only the luapower author's biased opinion of LuaRocks. Someone else should write this, ideally an user of both systems. Feedback welcome.</p>
</blockquote>
<p>LuaRocks is probably the most popular package manager for Lua. It is quite different than luapower in scope (Lua-focus vs. LuaJIT-focus), philosophy (manifest-based vs. convention-based, install vs. portable-tree) and implementation (full-fledged package manager vs simple git wrapper + reflection library), and with a large module collection. LuaRocks requires declaring all package dependencies, while luapower requires declaring only binary-only/build-only dependencies. Because LuaRocks does not enforce a standard directory layout on packages, having installed packages under version control is not possible. Luapower includes and compiles all external libraries, while that is out of the scope of LuaRocks. For this same reason, LuaRocks does not know how to find the include dir and lib dir of external dependencies all by itself, making out-of-the-box compilation of packages with dependencies a hit-or-miss experience. LuaRocks doesn't specify a required build toolchain for Windows, so you might need to have multiple versions of Visual Studio and MinGW before you get a decent number of packages built. This also affects binary rocks, which may come in linked against various versions of msvcrt.</p>
<h2 id="how-is-it-different-from-luadist">How is it different from LuaDist?</h2>
<blockquote>
<p><strong>FIXME</strong>: What follows is only the luapower author's biased opinion of LuaDist. Someone else should write this, ideally an user of both systems. Feedback welcome.</p>
</blockquote>
<p>LuaDist is a git-based binaries-included distro with many similarities to luapower and a large module collection. LuaDist supports more platforms and more compilers than luapower, although binaries are not always included for all platforms. LuaDist requires declaring all package dependencies. Building LuaDist binaries requires knowledge of cmake and LuaDist's own custom macros. Because LuaDist binaries are in separate branches, portable installations under version control are not possible (a deployment step is necessary to get to a running system). LuaDist requires maintaining a strict versioning scheme for packages and for dependency declarations. LuaDist has a full-fledged package manager, while luapower has a simple shell script that leverages git, and a reflection library for package analysis.</p>
<h2 id="how-are-the-libraries-chosen">How are the libraries chosen?</h2>
<p>The included libraries are chosen based on license, portability, speed and maturity, usually in that order.</p>
<h2 id="wheres-the-package-database">Where's the package database?</h2>
<p>There isn't one. Package information is computed on-the-fly using the <a href="/luapower">luapower</a> module (which also has a command-line interface, so check it out).</p>
<h2 id="how-is-versioning-maintained">How is versioning maintained?</h2>
<p>A package's version is the result of <code>git describe --tags --long --always</code>, which returns a string of form <code>tag-N-hash</code> where <code>tag</code> is the latest <em>major</em> version, <code>N</code> is the number of commits after that version, and <code>hash</code> is the hash prefix of the last commit. This way versioning is unambiguous, not prone to human error, and doesn't require maintenance. For every incompatible API change, the major version gets bumped. The HEAD is kept compatible across all libraries (incompatible development happens in separate branches, except for packages tagged <code>dev</code>).</p>
<blockquote>
<p><strong>Tip:</strong> To clone package foo at tag point r5 (which indicates the 5th release), do <code>mgit clone foo=r5</code>. To clone the same package at a known commit point, do <code>mgit clone foo=r5-2-a43cf7' or just</code>mgit clone foo=a43cf7'.</p>
</blockquote>
<h2 id="why-is-your-code-in-public-domain">Why is your code in Public Domain?</h2>
<p>Because I <a href="http://www.stephankinsella.com/publications/#againstip">don't support</a> copyright law.</p>
<h2 id="where-can-i-get-help">Where can I get help?</h2>
<p>Go to the <a href="/forum">luapower forum</a> and ask away. There's no such thing as a stupid question there, any discussion is welcome. Incidentally, that is also the place where you can share your plans for world domination, so go and introduce yourself now!</p>
<h2 id="how-do-i-report-bugs">How do I report bugs?</h2>
<p>For software bugs, use the github issues for that specific piece of software (all software is on github, including this website). For anything else, use the forum.</p>
<h2 id="how-can-i-help">How can I help?</h2>
<p>Making new packages, reporting bugs, writing docs, sending pull requests, are great ways to help luapower grow, and probably make some friends in the process.</p>
<p>If you have a great idea, or you would rather make things differently, just go to the <a href="/forum">forum</a> and say it. Luapower is at an early stage, so now is a good time to influence where it's going.</p>
<h2 id="who-are-you">Who are you?</h2>
<p>I'm <a href="/cosmin">Cosmin Apreutesei</a>, a programmer from Bucharest.</p>
<h2 id="where-are-you-going-with-this">Where are you going with this?</h2>
<p>My goal is to create a cross-platform environment for creating the next generation of desktop apps that run close-to-identically on every platform, with pixel-perfect vector-graphics including text shaping and rendering, complex interactivity beyond standard widget systems, peer-to-peer communication, a multi-threading/multi-process architecture, and fine-grained access to communication peripherals like webcams and pen tablets.</p>
<p>This requires a large number of high-quality packages with extensive APIs that are well below the &quot;scripting&quot; level of abstraction. Achieving this in an open source environment requires a model for development and collaboration with lower friction and a higher level of specificity than what current module distributions provide.</p>
<p>Luapower is an attempt to create that model.</p>
