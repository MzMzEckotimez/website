<table width=100%>
	<tr>
		<td valign=top width=110 style="padding-right: 20px;">
			{{^info}}{{^download}}
			{{#docs}}
				{{#selected}}<span class=selected_doc>{{name}}</span>{{/selected}}
				{{^selected}}<a href="/{{name}}">{{name}}</a>{{/selected}}
				<br>
			{{/docs}}
			{{/download}}{{/info}}
			<br>
			{{#cat}}
			<h4 class="package_cat_name tight">{{name}}</h4>
			{{#packages}}
				<a href="/{{.}}">{{.}}</a>
				<br>
			{{/packages}}
			{{/cat}}
		</td>
		<td valign=top>
			<table width=100%>
				<tr>
					<td valign=top>
						<h1 class=tight>{{title}}</h1>
						<h4 class=tight>{{tagline}}</h4>
					</td>
					<td valign=top align=right class=action_links>
						<a href="/{{package}}" class="nowrap {{^info}}{{^download}}selected_link{{/download}}{{/info}}"><i class="fa fa-file-text-o"></i> documentation</a>
						<a href="/{{package}}/info" class="nowrap {{#info}}selected_link{{/info}}"><i class="fa fa-info-circle"></i> package info</a>
						<a href="/{{package}}/download" class="nowrap download_link {{#download}}selected_link{{/download}}"><i class="fa fa-download"></i> download</a>
					</td>
				</tr>
			</table>
			<br>

			<!-- download =================================================== -->
			{{#download}}
			<h2>Download</h2>
			<a class=download_btn href="https://github.com/luapower/{{package}}/archive/master.zip">
				<i class="fa fa-download"></i>
				<span>{{package}}-master.zip</span>&nbsp;&nbsp;&nbsp;
			</a>
			<br>
			<a class="small download_link" href="https://github.com/luapower/{{package}}/archive/master.tar.gz">
				<i class="fa fa-download" style="margin-left: 1em; margin-right: 0.5em"></i>
				<span>{{package}}-master.tar.gz</span>
			</a>

			<h2>Clone with <a href="/luapower-git">multigit</a></h2>
			<div>
				<div class="switch_group" switch_group_for=".clone_for" persistent=1>
				{{#clone_lists}}
					<a
						switch_for=".clone_for_{{icon}}"
						class="icon-{{icon}} disabled"><i>{{text}}</i></a>&nbsp;
				{{/clone_lists}}
				</div>
			</div>
			<div class=doc>
				{{#clone_lists}}
				<pre class="clone_for clone_for_{{icon}} hidden"><code>{{#is_unix}}./{{/is_unix}}mgit clone{{#packages}} {{dep_package}}{{/packages}}
</code></pre>
				{{/clone_lists}}
			</div>
			<!--
			<h2>Install with <a href="http://luarocks.org/">LuaRocks</a></h2>
			<pre>
luarocks install --server=http://rocks.moonscript.org/m/luapower {{package}}
			</pre>
			-->
			<br>
			<br>
			{{/download}}

			<!-- info ======================================================= -->
			{{#info}}

			<h3>Package Dependencies
				&nbsp;
				<a class=infotip>
					This is a combined list of packages required by all modules of this package on each supported platform.
					<br>Darker names, if present, represent indirect dependencies.
				</a>
				&nbsp;
				<a class="hastip package_dep_switch" title="show as table"><i class="fa fa-table"></i></a>
				<a class="hastip package_dep_switch hidden" title="show as list"><i class="fa fa-list"></i></a>
			</h3>
			{{#has_package_deps}}
			<table id=dep_lists>
				{{#package_deps}}
				<tr>
					<td class=col1 valign=top align=right>
						{{#icon}}<span class="icon-{{icon}}"></span>{{/icon}}
						{{^icon}}<i>common</i>{{/icon}}
					</td>
					<td class=col2 valign=top>
						{{#packages}}
						{{#icon}}<span class=gray>&#43;</span>{{/icon}}<a href="/{{dep_package}}/info" class="{{kind}}">{{dep_package}}</a>&nbsp;
						{{/packages}}
					</td>
				</tr>
				{{/package_deps}}
			</table>
			<div id=dep_matrix class="doc hidden">
				<table>
					<thead>
						<tr>
							<th></th>
							{{#depmat_names}}
							<th><a href="/{{.}}">{{.}}</a></th>
							{{/depmat_names}}
						</tr>
					</thead>
					<tbody>
						{{#depmat}}
						<tr>
							<td><span class="icon-{{icon}}"></span></td>
							{{#pkg}}
							<td align=center>
								{{#.}}
									{{#checked}}<i class="fa fa-check {{kind}}"></i>{{/checked}}
								{{/.}}
							</td>
							{{/pkg}}
						</tr>
						{{/depmat}}
					</tbody>
				</table>
				</div>
			{{/has_package_deps}}
			{{^has_package_deps}}
				<span class=smallnote>No dependencies.</span>
			{{/has_package_deps}}

			{{#has_modules}}
			<h3>
				Module Dependencies
				&nbsp;
				<a class=infotip>
					<span class=package_list>
						These are the lists of packages required by each module of this package.
						<br>Darker names, if present, represent indirect dependencies.
					</span>
					<span class="module_list hidden">
						These are the lists of modules required by each module of this package.
						<br>Darker names, if present, represent indirect dependencies.
						<br>Even darker names are internal dependencies.
					</span>
				</a>
				&nbsp;
				<a class="hastip modpkg_switch" type=P title="show required modules">P</a>
				<a class="hastip modpkg_switch hidden" type=M title="show required packages">M</a>
			</h3>
			<table id=module_table>
				<tr>
					<th></th>
					<th align=left valign=top>module &nbsp;</th>
					<th align=left valign=top>
						<span class="package_list">package</span>
						<span class="module_list hidden">module</span>
						dependencies
					</th>
				</tr>
				{{#modules}}
				<tr>
					<td valign=top align=center width=30>
						{{#icons}}
							<span class="icon-{{name}} {{disabled}}" title="{{title}}"></span>
						{{/icons}}
					</td>
					<td class="nowrap" valign=top style="padding-right: 1em">
						<a href="https://github.com/luapower/{{package}}/blob/master/{{file}}?ts=3" module="{{module}}">{{module}}</a>
					</td>
					<td valign=top>
						<span class="{{error_class}}">
						{{#load_errors}}
							{{#icon}}<span class="icon-{{icon}}" style="padding-right: 0.5em"></span>{{/icon}}
							{{#errors}}{{.}}<br>{{/errors}}
						{{/load_errors}}
						</span>
						<div class="package_list">
						{{#package_deps}}
							{{#icon}}<span class="icon-{{icon}}" style="padding-right: 0.5em"></span>{{/icon}}
							{{#packages}}
								<a href="/{{dep_package}}/info" class="{{kind}}">{{dep_package}}</a>&nbsp;
							{{/packages}}
						{{/package_deps}}
						</div>
						<div class="module_list hidden">
						{{#module_deps}}
							{{#icon}}<span class="icon-{{icon}}" style="padding-right: 0.5em"></span>{{/icon}}
							{{#modules}}
								<a href="https://github.com/luapower/{{dep_package}}/blob/master/{{dep_file}}?ts=3" class="{{kind}}">{{dep_module}}</a>&nbsp;
							{{/modules}}
						{{/module_deps}}
					</td>
				</tr>
				{{/modules}}
			</table>
			{{#has_autoloads}}
			<h3>Runtime Dependencies - Autoloads
				&nbsp;
				<div class=infotip>
					Some modules implement parts of their API in separate sub-modules.
					<br>These <i>implementation</i> modules are loaded automatically at runtime
					<br>only if and when accessing those APIs.
					<br>See <a href="/glue#autoload">glue.autoload</a> for how this works.
				</div>
			</h3>
			{{#modules}}{{#module_has_autoloads}}
			<table>
				<tr>
					<th></th>
					<th align=left>module.field</th>
					<th align=left>implementation module</th>
				</tr>
				{{#autoloads}}
				<tr>
					<td valign=top align=center width=30>
						<span class="icon-{{icon}}"></span>
					</td>
					<td style="padding-right: 1em">
						<a href="https://github.com/luapower/{{package}}/blob/master/{{file}}?ts=3">{{module}}.{{key}}</a>
					</td>
					<td>
						<a href="https://github.com/luapower/{{package}}/blob/master/{{impl_file}}?ts=3">{{impl_module}}</a>
					</td>
				</tr>
				{{/autoloads}}
			</table>
			{{/module_has_autoloads}}{{/modules}}
			{{/has_autoloads}}

			{{#has_runtime_deps}}
			<h3>Runtime Dependencies - Other</h3>
				&nbsp;
				<a class=infotip>
					These are additional modules that are required automatically
					<br>at runtime in specific circumstances.
					<br>Check the module's documentation or source code for when.
				</a>
				{{#modules}}{{#module_has_runtime_deps}}
				<table>
					<tr>
						<th></th>
						<th align=left style="border-bottom: 1px solid gray">module</th>
						<th align=left style="border-bottom: 1px solid gray">runtime dependencies</th>
					</tr>
					{{#runtime_deps}}
					<tr>
						<td valign=top align=center width=30>
							<span class="icon-{{icon}}"></span>
						</td>
						<td style="padding-right: 1em">
							<a href="https://github.com/luapower/{{package}}/blob/master/{{file}}?ts=3">{{module}}.{{key}}</a>
						</td>
						<td>
							<a href="https://github.com/luapower/{{package}}/blob/master/{{impl_file}}?ts=3">{{impl_module}}</a>
						</td>
					</tr>
					{{/runtime_deps}}
				</table>
				{{/module_has_runtime_deps}}{{/modules}}
			{{/has_runtime_deps}}

			{{/has_modules}}

			{{#has_scripts}}
			<h3>Scripts</h3>
			<ul class=multicol_name>
			{{#scripts}}
				<li>
					<a href="/{{package}}/{{.}}">{{.}}</a>
				</li>
			{{/scripts}}
			</ul>
			{{/has_scripts}}

			{{#has_docs}}
			<h3>Docs</h3>
			<ul>
			{{#docs}}
				<li>{{.}}</li>
			{{/docs}}
			</ul>
			{{/has_docs}}

			{{/info}}

			<!-- documentation ============================================== -->
			{{^info}}{{^download}}
			<div id=doc class=doc>
				{{{doc_html}}}
				{{^doc_html}}
				<span class="small gray">No documentation found.</span>
				{{/doc_html}}
				<br>
				<p class="small gray" style="float: right">
					{{#doc_mtime_ago}}Last updated: <b>{{doc_mtime_ago}}</b>{{/doc_mtime_ago}}
				</p>
				<!--enddoc is needed for spyscroll docnav-->
				<enddoc></enddoc>
			</div>
			{{/download}}{{/info}}

		</td>
		<td valign=top align=right class="rightside nowrap">
			<h1 class=tight style="margin-bottom: 10px">
				{{#icons}}
					<span class="icon-{{name}} {{disabled}}" title="{{title}}"></span>
				{{/icons}}
			</h1>
			<br>
			<table width=100% class=infobar>
				<tr>
					<td align=left class="gray">Pkg type:</td><td align=left>{{type}}</td>
				</tr>
				<tr>
					<td align=left class="gray">Version: </td><td align=left>{{version}}</td>
				</tr>
				<tr>
					<td align=left class="gray">Last commit: </td><td align=left><a href="https://github.com/luapower/{{package}}/commits/master">{{mtime_ago}}</a></td>
				</tr>
				{{#cname}}
				<tr>
					<td align=left class="gray">C library: </td><td align=left>{{cname}}</td>
				</tr>
				{{/cname}}
				{{#cversion}}
				<tr>
					<td align=left class="gray">Clib version: </td><td align=left><a href="{{curl}}">{{cversion}}</a></td>
				</tr>
				{{/cversion}}
				<tr>
					<td align=left class="gray">License: </td><td align=left>{{license}}</td>
				</tr>
				<tr>
					<td align=left valign=top colspan=2>
						<span class="gray requires_label">Requires:</span>
						<span style="white-space: normal">
						{{#package_deps}}
							{{#icon}}<span class="gray icon-{{icon}}" style="padding-right: 0.5em"></span>{{/icon}}
							{{#packages}}
								{{#icon}}<span class=gray>&#43;</span>{{/icon}}<a href="/{{dep_package}}/info" class="{{kind}}">{{dep_package}}</a>&nbsp;
							{{/packages}}
						{{/package_deps}}
						</span>
						{{^package_deps}}
						<span class=smallnote>none</span>
						{{/package_deps}}
					</td>
				</tr>
				<tr>
					<td align=left valign=top colspan=2>
						<span class="gray requires_label">Required by: </span>
						<span style="white-space: normal">
						{{#package_rdeps}}
							{{#icon}}<span class="gray icon-{{icon}}" style="padding-right: 0.5em"></span>{{/icon}}
							{{#packages}}
								{{#icon}}<span class=gray>&#43;</span>{{/icon}}<a href="/{{dep_package}}/info" class="{{kind}}">{{dep_package}}</a>&nbsp;
							{{/packages}}
						{{/package_rdeps}}
						</span>
						{{^package_rdeps}}
						<span class=smallnote>none</span>
						{{/package_rdeps}}
					</td>
				</tr>
			</table>
			<br>
			<div id=docnav></div>
		</td>
	</tr>
</table>
<script>
$(function() {

	$('.package_dep_switch').click(function() {
		$('#dep_lists').toggle()
		$('#dep_matrix').toggle()
		$('.package_dep_switch').toggle()
	}).mousedown(function(e) {
		// prevent selection of subsequent text on double-click.
		e.preventDefault()
	})

	$('.modpkg_switch').click(function() {
		var pkg = $(this).attr('type') == 'P'
		$('.package_list').toggle()
		$('.module_list').toggle()
		$('.modpkg_switch').toggle()
	}).mousedown(function(e) {
		// prevent selection of subsequent text on double-click.
		e.preventDefault()
	})

	// activate the clone_for switch for the current OS by default

	var ua = navigator.userAgent
	var os =
		getcookie('switch.clone_for') ||
		ua.indexOf('Windows') >= 0 && 'mingw' ||
		ua.indexOf('Linux') >= 0 && 'linux' ||
		ua.indexOf('OS X') >= 0 && 'osx'

	$('[switch_for^=".clone_for_'+os+'"]').click()

})
</script>
