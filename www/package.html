<table width=100%>
	<tr>
		<td valign=top>
			<table width=100%>
				<tr>
					<td valign=top>
						<h1 class=tight>{{package}}</h1>
						<h4 class=tight>{{tagline}}</h4>
					</td>
					<td valign=top align=right class=spacey_links>
						<a href="/{{package}}" class=nowrap><i class="fa fa-file-text-o"></i> documentation</a>
						<a href="/{{package}}/info" class=nowrap><i class="fa fa-info-circle"></i> package info</a>
						<a href="/{{package}}/download" class="nowrap download_link"><i class="fa fa-download"></i> download</a>
					</td>
				</tr>
			</table>
			<br>

			<!-- download =================================================== -->
			{{#download}}
			<table>
				<tr>
					<td valign=top>
						<h2>Download</h2>
						<a class=download href="https://github.com/luapower/{{package}}/archive/master.tar.gz">
							<i class="fa fa-download"></i> download tgz</a>
						<a class=download href="https://github.com/luapower/{{package}}/archive/master.zip">
							<i class="fa fa-download"></i> download zip</a>
					</td>
					<td valign=top align=left>
						<table>
							<tr>
								<td>
									<h2>Clone</h2>
								</td>
								<td width=10></td>
								<td>
									<div class=platform_btn>
										<div id=windows_clone_btn class="{{#on_windows}}selected{{/on_windows}}">
											<div class="icon-mingw"></div>
										</div>
										<div id=unix_clone_btn class="{{^on_windows}}selected{{/on_windows}}">
											<div class="icon-linux"></div>
											<div class="icon-osx"></div>
										</div>
									</div>
								</td>
							</tr>
						</table>
						<pre class="windows {{^on_windows}}hidden{{/on_windows}}">
cd luapower
md _git\{{package}}
set GIT_DIR=_git\{{package}}\.git
git init
git config --local core.worktree ../../..
git config --local core.excludesfile {{package}}.exclude
git remote add origin https://github.com/luapower/{{package}}.git
git fetch --all
git branch --track master origin/master
git checkout
						</pre>
						<pre class="unix {{^on_unix}}hidden{{/on_unix}}">
cd luapower
mkdir -p _git/{{package}}
export GIT_DIR=_git/{{package}}/.git
git init
git config --local core.worktree ../../..
git config --local core.excludesfile {{package}}.exclude
git remote add origin https://github.com/luapower/{{package}}.git
git fetch --all
git branch --track master origin/master
git checkout
						</pre>
					</td>
				</tr>
			</table>

			<h2>Clone with <a href="/luapower-git">luapower-git</a></h2>
				<pre class="windows {{^on_windows}}hidden{{/on_windows}}">
	<a href="/luapower-git">luapower</a> clone winapi
				</pre>
				<pre class="unix {{^on_unix}}hidden{{/on_unix}}">
	<a href="/luapower-git">./luapower.sh</a> clone winapi
				</pre>

			<h2>Install with <a href="http://luarocks.org/">LuaRocks</a></h2>
				<pre>
	luarocks install --server=http://rocks.moonscript.org/m/luapower {{package}}
				</pre>
			{{/download}}

			<!-- info ======================================================= -->
			{{#info}}

			<h3>Package Dependencies &nbsp;
				<a class="dep_switch package_dep_switch"><i class="fa fa-table"></i></a>
				<a class="dep_switch package_dep_switch hidden"><i class="fa fa-list"></i></a>
			</h3>
			{{#has_package_deps}}
			<p class=smallnote>
				This is a combined list of packages required by all modules of this package on each supported platform.
				<br>Grayed out names represent indirect dependencies.
			</p>
			<table id=dep_lists>
				{{#package_deps}}
				<tr>
					<td class=col1 valign=top>
						<span class="icon-{{icon}}">{{^icon}}<i>all</i>{{/icon}}</span>
					</td>
					<td class=col2 valign=top>
						{{#packages}}
						<a href="/{{package}}" class="{{indirect}}">{{package}}</a>&nbsp;
						{{/packages}}
					</td>
				</tr>
				{{/package_deps}}
			</table>
			<div id=dep_matrix class="doc hidden">
				<table>
					<thead>
						<tr>
							<th></th>
							{{#depnames}}
							<th><a href="/{{.}}">{{.}}</a></th>
							{{/depnames}}
						</tr>
					</thead>
					<tbody>
						{{#depmat}}
						<tr>
							<td><span class="icon-{{icon}}">{{^icon}}<i>all</i>{{/icon}}</span></td>
							{{#pkg}}<td align=center>{{#.}}<i class="fa fa-check"></i>{{/.}}</td>{{/pkg}}
						</tr>
						{{/depmat}}
					</tbody>
				</table>
				</div>
			{{/has_package_deps}}
			{{^has_package_deps}}
				<span class=smallnote>No dependencies.</span>
			{{/has_package_deps}}

			{{#has_modules}}
			<h3>
				Module Dependencies
				&nbsp;
				<a class="modpkg_switch" type=P title="show required modules">P</a>
				<a class="modpkg_switch hidden" type=M title="show packages">M</a>
			</h3>
			<p class=smallnote>
				Grayed out names represent indirect dependencies or internal dependencies.
			</p>
			<table id=module_table>
				{{#modules}}
				<tr>
					<td valign=top align=center width=30>
						{{#icons}}
							<span class="icon-{{name}} {{disabled}}" title="{{title}}"></span>
						{{/icons}}
					</td>
					<td class="nowrap" valign=top style="padding-right: 1em">
						<a href="/{{package}}/{{module}}" module="{{module}}">{{module}}</a>
					</td>
					<td valign=top>
						<span class="{{error_class}}">
						{{#load_errors}}
							{{#icon}}<span class="icon-{{icon}}" style="padding-right: 0.5em"></span>{{/icon}}
							{{#errors}}{{.}}<br>{{/errors}}
						{{/load_errors}}
						</span>
						<div class="package_list">
						{{#package_deps}}
							{{#icon}}<span class="icon-{{icon}}" style="padding-right: 0.5em"></span>{{/icon}}
							{{#packages}}
								<a href="/{{package}}" class="{{indirect}}">{{package}}</a>&nbsp;
							{{/packages}}
						{{/package_deps}}
						</div>
						<div class="module_list hidden">
						{{#module_deps}}
							{{#icon}}<span class="icon-{{icon}}" style="padding-right: 0.5em"></span>{{/icon}}
							{{#modules}}
								<a href="/{{package}}" class="{{indirect}}">{{package}}</a>&nbsp;
							{{/modules}}
						{{/module_deps}}
					</td>
				</tr>
				{{/modules}}
			</table>
			{{#has_autoloads}}
			<h3>Module Autoloads</h3>
				{{#modules}}{{#has_autoloads}}
					{{#autoloads}}
					<h4 class=tight>
						<span class="icon-{{icon}}" style="display: inline-block; width: 30px"></span>
						<a href="/{{module}}">{{module}}</a>
					</h4>
					<table>
					{{#autoloads}}
						<tr>
							<td style="padding-left: 60px; padding-right: 1em">{{key}}</td>
							<td><a href="/{{module}}">{{module}}</a></td>
						</tr>
					{{/autoloads}}
					</table>
					{{/autoloads}}
				{{/has_autoloads}}{{/modules}}
			{{/has_autoloads}}

			{{/has_modules}}

			{{#has_scripts}}
			<h3>Scripts</h3>
			<ul class=multicol_name>
			{{#scripts}}
				<li>
					<a href="/{{package}}/{{.}}">{{.}}</a>
				</li>
			{{/scripts}}
			</ul>
			{{/has_scripts}}

			{{#has_docs}}
			<h3>Docs</h3>
			<ul>
			{{#docs}}
				<li>{{.}}</li>
			{{/docs}}
			</ul>
			{{/has_docs}}

			{{/info}}

			<!-- documentation ============================================== -->
			{{^info}}{{^download}}
			<div id=doc class=doc>
				{{{doc_html}}}
				<enddoc></enddoc>
			</div>
			{{/download}}{{/info}}

		</td>
		<td id=rightside valign=top align=right width=180 class=nowrap style="padding-left: 20px">
			<h1 class=tight style="margin-bottom: 10px">
				{{#icons}}
					<span class="icon-{{name}} {{disabled}}" title="{{title}}"></span>
				{{/icons}}
			</h1>
			<br>
			<table width=100% class=infobar>
				<tr>
					<td align=left class="small gray">Pkg type:</td><td align=left class=small>{{type}}</td>
				</tr>
				<tr>
					<td align=left class="small gray">Version: </td><td align=left class=small>{{version}}</td>
				</tr>
				<tr>
					<td align=left class="small gray">Last commit: </td><td align=left class=small><a href="https://github.com/luapower/{{package}}/commits/master">{{mtime_ago}}</a></td>
				</tr>
				{{#cname}}
				<tr>
					<td align=left class="small gray">C library: </td><td align=left class=small>{{cname}}</td>
				</tr>
				{{/cname}}
				{{#cversion}}
				<tr>
					<td align=left class="small gray">Clib version: </td><td align=left class=small><a href="{{curl}}">{{cversion}}</a></td>
				</tr>
				{{/cversion}}
				{{#cname}}
				<tr>
					<td align=left class="small gray">Clib license: </td><td align=left class=small>{{license}}</td>
				</tr>
				{{/cname}}
				<tr>
					<td align=left class="small gray">Binding lic.: </td><td align=left class=small>Public Domain</td>
				</tr>
			</table>
			<br>
			<div id=docnav></div>
		</td>
	</tr>
</table>
<script>
$(function() {

	$('.package_dep_switch').click(function() {
		$('#dep_lists').toggle()
		$('#dep_matrix').toggle()
		$('.package_dep_switch').toggle()
	}).mousedown(function(e) {
		// prevent selection of subsequent text on double-click.
		e.preventDefault()
	})


	$('.modpkg_switch').click(function() {
		var pkg = $(this).attr('type') == 'P'
		$('.package_list').toggle()
		$('.module_list').toggle()
		$('.modpkg_switch').toggle()
	}).mousedown(function(e) {
		// prevent selection of subsequent text on double-click.
		e.preventDefault()
	})

	$('#windows_clone_btn').click(function() {
		$('pre.unix').hide()
		$('pre.windows').show()
		$(this).addClass('selected')
		$('#unix_clone_btn').removeClass('selected')
	})

	$('#unix_clone_btn').click(function() {
		$('pre.windows').hide()
		$('pre.unix').show()
		$(this).addClass('selected')
		$('#windows_clone_btn').removeClass('selected')
	})

})
</script>
